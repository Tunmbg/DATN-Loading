<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
  <body>
    <div th:fragment="content">
      <a class="close_side_menu" href="javascript:void(0);"></a>

      <div class="rbt-page-banner-wrapper">
        <!-- Start Banner BG Image  -->
        <div class="rbt-banner-image"></div>
        <!-- End Banner BG Image  -->
      </div>

      <!-- Start Card Style -->
      <div class="rbt-dashboard-area rbt-section-overlayping-top rbt-section-gapBottom">
        <div class="container">
          <div class="row">
            <div class="col-lg-12">
              <!-- Start Dashboard Top  -->
              <div
                th:replace="~{client/instructor/instructor-banner :: instructor-banner}"
                sec:authorize="hasAnyRole('ROLE_INSTRUCTOR', 'ROLE_ADMIN')"
              ></div>
              <div
                th:replace="~{client/student/student-banner :: student-banner}"
                sec:authorize="hasRole('ROLE_STUDENT') and not hasAnyRole('ROLE_INSTRUCTOR', 'ROLE_ADMIN')"
              ></div>
              <!-- End Dashboard Top  -->

              <div class="row g-5">
                <div class="col-lg-3">
                  <!-- Start Dashboard Sidebar  -->
                  <div th:replace="~{client/student/studentSidebar :: student-sidebar}"></div>
                  <!-- End Dashboard Sidebar  -->
                </div>

                <div class="col-lg-9">
                  <!-- Start Enrole Course  -->
                  <div class="rbt-dashboard-content bg-color-white rbt-shadow-box">
                    <div class="content">
                      <div class="section-title">
                        <h4 class="rbt-title-style-3">Kh√≥a h·ªçc c·ªßa t√¥i</h4>
                      </div>

                      <div class="advance-tab-button mb--30">
                        <ul class="nav nav-tabs tab-button-style-2 justify-content-start" id="myTab-4" role="tablist">
                          <li role="presentation">
                            <a
                              href="#"
                              class="tab-button active"
                              id="publish-tab-4"
                              data-bs-toggle="tab"
                              data-bs-target="#publish-4"
                              role="tab"
                              aria-controls="publish-4"
                              aria-selected="true"
                            >
                              <span class="title">ƒê√£ ƒëƒÉng</span>
                            </a>
                          </li>
                          <li role="presentation">
                            <a
                              href="#"
                              class="tab-button"
                              id="pending-tab-4"
                              data-bs-toggle="tab"
                              data-bs-target="#pending-4"
                              role="tab"
                              aria-controls="pending-4"
                              aria-selected="false"
                            >
                              <span class="title">ƒêang ch·ªù ph√™ duy·ªát</span>
                            </a>
                          </li>
                          <li role="presentation">
                            <a
                              href="#"
                              class="tab-button"
                              id="draft-tab-4"
                              data-bs-toggle="tab"
                              data-bs-target="#draft-4"
                              role="tab"
                              aria-controls="draft-4"
                              aria-selected="false"
                            >
                              <span class="title">B·∫£n nh√°p</span>
                            </a>
                          </li>
                          <li role="presentation">
                            <a
                              href="#"
                              class="tab-button"
                              id="hidden-tab-4"
                              data-bs-toggle="tab"
                              data-bs-target="#hidden-4"
                              role="tab"
                              aria-controls="hidden-4"
                              aria-selected="false"
                            >
                              <span class="title">ƒêang b·ªã ·∫©n</span>
                            </a>
                          </li>
                        </ul>
                      </div>

                      <div class="tab-content">
                        <div
                          class="tab-pane fade active show"
                          id="publish-4"
                          role="tabpanel"
                          aria-labelledby="publish-tab-4"
                        >
                          <div class="row g-5">
                            <!-- L·∫∑p qua danh s√°ch kh√≥a h·ªçc ƒë√£ approved -->
                            <div class="col-lg-4 col-md-6 col-12" th:each="course : ${publishCourses}">
                              <div class="rbt-card variation-01 rbt-hover">
                                <!-- ·∫¢nh kh√≥a h·ªçc -->
                                <div class="rbt-card-img">
                                  <a th:href="@{'/course-details/' + ${course.courseId}}">
                                    <img
                                      th:src="@{'/uploads/course/' + ${course.courseImage}}"
                                      onerror="this.onerror=null; this.src='/assets/images/course/course-default.jpg';"
                                      alt="Course image"
                                    />
                                  </a>
                                </div>

                                <!-- Th√¥ng tin chi ti·∫øt kh√≥a h·ªçc -->
                                <div class="rbt-card-body">
                                  <div class="rbt-card-top">
                                    <div class="rbt-review">
                                      <div class="rating">
                                        <th:block
                                          th:with="fullStars=${T(java.lang.Math).floor(course.rating)}, emptyStars=${5 - T(java.lang.Math).floor(course.rating)}"
                                        >
                                          <!-- Hi·ªÉn th·ªã sao ƒë·∫ßy -->
                                          <i
                                            class="fas fa-star"
                                            th:each="star : ${#numbers.sequence(1, fullStars)}"
                                            th:if="${fullStars > 0}"
                                          ></i>

                                          <!-- Hi·ªÉn th·ªã sao r·ªóng -->
                                          <i
                                            class="far fa-star"
                                            th:each="star : ${#numbers.sequence(1, emptyStars)}"
                                            th:if="${emptyStars > 0}"
                                          ></i>
                                        </th:block>
                                      </div>
                                      <!-- S·ªë l∆∞·ª£ng ƒë√°nh gi√° -->
                                      <span class="rating-count" th:text="'(' + ${course.reviewCount} + ' Reviews)'">
                                        (0 Reviews)
                                      </span>
                                    </div>

                                    <!-- N√∫t bookmark -->
                                    <div class="rbt-bookmark-btn">
                                      <a class="rbt-round-btn" title="Bookmark" href="#">
                                        <i class="feather-bookmark"></i>
                                      </a>
                                    </div>
                                  </div>

                                  <!-- Ti√™u ƒë·ªÅ kh√≥a h·ªçc -->
                                  <h4 class="rbt-card-title">
                                    <a th:href="@{'/course-details/' + ${course.courseId}}" th:text="${course.title}">
                                      Course Title
                                    </a>
                                  </h4>

                                  <!-- Th√¥ng tin th√™m v·ªÅ kh√≥a h·ªçc -->
                                  <ul class="rbt-meta">
                                    <li>
                                      <i class="feather-book"></i>
                                      <span th:text="${course.modules.size()} + ' Lessons'">0 Lessons</span>
                                    </li>
                                    <li>
                                      <i class="feather-users"></i>
                                      <span th:text="${course.enrollments.size()} + ' Students'">0 Students</span>
                                    </li>
                                  </ul>

                                  <!-- Ph·∫ßn gi√° -->
                                  <div class="rbt-card-bottom">
                                    <div class="rbt-price" th:if="${course.price > 0}">
                                      <!-- Hi·ªÉn th·ªã gi√° hi·ªán t·∫°i -->
                                      <span
                                        class="current-price"
                                        th:style="'font-size: 2.2rem;'"
                                        th:text="${#numbers.formatDecimal(course.price, 0, 'COMMA', 0, 'POINT')} + ' ƒë'"
                                      >
                                      </span>

                                      <!-- Hi·ªÉn th·ªã gi√° g·ªëc n·∫øu c√≥ gi·∫£m gi√° -->
                                      <span
                                        class="off-price"
                                        th:if="${course.discount > 0}"
                                        th:style="'font-size: 1.4rem; text-decoration: line-through; color: #999;'"
                                        th:text="${#numbers.formatDecimal(course.price / (1 - (course.discount / 100)), 0, 'COMMA', 0, 'POINT')} + ' ƒë'"
                                      >
                                      </span>
                                    </div>

                                    <div class="rbt-price" th:if="${course.price == 0}">
                                      <span class="current-price" th:style="'font-size: 2.2rem;'">Mi·ªÖn ph√≠</span>
                                    </div>

                                    <!-- N√∫t s·ª≠a kh√≥a h·ªçc -->
                                    <a
                                      class="rbt-btn-link left-icon"
                                      th:href="@{'/instructor/edit-course/' + ${course.courseId}}"
                                    >
                                      <i class="feather-edit"></i> Edit
                                    </a>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="tab-pane fade" id="pending-4" role="tabpanel" aria-labelledby="pending-tab-4">
                          <div class="row g-5">
                            <!-- Start Single Course -->
                            <div class="col-lg-4 col-md-6 col-12" th:each="course : ${pendingCourses}">
                              <div class="rbt-card variation-01 rbt-hover">
                                <div class="rbt-card-img">
                                  <a th:href="@{'/course-details/' + ${course.courseId}}">
                                    <img
                                      th:src="@{'/uploads/course/' + ${course.courseImage}}"
                                      onerror="this.onerror=null; this.src='/assets/images/course/course-default.jpg';"
                                      alt="Card image"
                                    />
                                  </a>
                                </div>
                                <div class="rbt-card-body">
                                  <div class="rbt-card-top">
                                    <div class="rbt-review">
                                      <div class="rating">
                                        <th:block
                                          th:with="fullStars=${T(java.lang.Math).floor(course.rating)}, emptyStars=${5 - T(java.lang.Math).floor(course.rating)}"
                                        >
                                          <!-- Hi·ªÉn th·ªã sao ƒë·∫ßy -->
                                          <i
                                            class="fas fa-star"
                                            th:each="star : ${#numbers.sequence(1, fullStars)}"
                                            th:if="${fullStars > 0}"
                                          ></i>

                                          <!-- Hi·ªÉn th·ªã sao r·ªóng -->
                                          <i
                                            class="far fa-star"
                                            th:each="star : ${#numbers.sequence(1, emptyStars)}"
                                            th:if="${emptyStars > 0}"
                                          ></i>
                                        </th:block>
                                      </div>
                                      <span class="rating-count" th:text="'(' + ${course.reviewCount} + ' Reviews)'">
                                        (0 Reviews)
                                      </span>
                                    </div>
                                    <div class="rbt-bookmark-btn">
                                      <a class="rbt-round-btn" title="Bookmark" href="#"
                                        ><i class="feather-bookmark"></i
                                      ></a>
                                    </div>
                                  </div>
                                  <h4 class="rbt-card-title">
                                    <a th:href="@{'/course-details/' + ${course.courseId}}" th:text="${course.title}"
                                      >Course Title</a
                                    >
                                  </h4>
                                  <ul class="rbt-meta">
                                    <li>
                                      <i class="feather-book"></i>
                                      <span th:text="${course.modules.size()} + ' Lessons'">0 Lessons</span>
                                    </li>
                                    <li>
                                      <i class="feather-users"></i>
                                      <span th:text="${course.enrollments.size()} + ' Students'">0 Students</span>
                                    </li>
                                  </ul>

                                  <div class="rbt-card-bottom">
                                    <div class="rbt-price" th:if="${course.price > 0}">
                                      <!-- Hi·ªÉn th·ªã gi√° hi·ªán t·∫°i -->
                                      <span
                                        class="current-price"
                                        th:style="'font-size: 2.2rem;'"
                                        th:text="${#numbers.formatDecimal(course.price, 0, 'COMMA', 0, 'POINT')} + ' ƒë'"
                                      >
                                      </span>

                                      <!-- Hi·ªÉn th·ªã gi√° g·ªëc n·∫øu c√≥ gi·∫£m gi√° -->
                                      <span
                                        class="off-price"
                                        th:if="${course.discount > 0}"
                                        th:style="'font-size: 1.4rem; text-decoration: line-through; color: #999;'"
                                        th:text="${#numbers.formatDecimal(course.price / (1 - (course.discount / 100)), 0, 'COMMA', 0, 'POINT')} + ' ƒë'"
                                      >
                                      </span>
                                    </div>

                                    <div class="rbt-price" th:if="${course.price == 0}">
                                      <span class="current-price" th:style="'font-size: 2.2rem;'">Mi·ªÖn ph√≠</span>
                                    </div>

                                    <a
                                      class="rbt-btn-link left-icon"
                                      th:href="@{'/instructor/edit-course/' + ${course.courseId}}"
                                    >
                                      <i class="feather-edit"></i> Edit
                                    </a>

                                    <form
                                      th:action="@{/instructor/delete-course}"
                                      onsubmit="return confirm('B·∫°n c√≥ mu·ªën x√≥a b·∫£n nh√°p n√†y')"
                                      method="post"
                                    >
                                      <input type="hidden" name="_method" value="delete" />
                                      <input type="hidden" name="courseId" th:value="${course.courseId}" />
                                      <button type="submit" class="btn btn-danger">
                                        <i class="feather-trash"></i> Delete
                                      </button>
                                    </form>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- End Single Course -->
                          </div>
                        </div>

                        <div class="tab-pane fade" id="draft-4" role="tabpanel" aria-labelledby="draft-tab-4">
                          <div class="row g-5">
                            <!-- Start Single Course -->
                            <div class="col-lg-4 col-md-6 col-12" th:each="course : ${draftCourses}">
                              <div class="rbt-card variation-01 rbt-hover">
                                <div class="rbt-card-img">
                                  <a th:href="@{'/course-details/' + ${course.courseId}}">
                                    <img
                                      th:src="@{'/uploads/course/' + ${course.courseImage}}"
                                      onerror="this.onerror=null; this.src='/assets/images/course/course-default.jpg';"
                                      alt="Card image"
                                    />
                                  </a>
                                </div>
                                <div class="rbt-card-body">
                                  <div class="rbt-card-top">
                                    <div class="rbt-review">
                                      <div class="rating">
                                        <th:block
                                          th:with="fullStars=${T(java.lang.Math).floor(course.rating)}, emptyStars=${5 - T(java.lang.Math).floor(course.rating)}"
                                        >
                                          <!-- Hi·ªÉn th·ªã sao ƒë·∫ßy -->
                                          <i
                                            class="fas fa-star"
                                            th:each="star : ${#numbers.sequence(1, fullStars)}"
                                            th:if="${fullStars > 0}"
                                          ></i>

                                          <!-- Hi·ªÉn th·ªã sao r·ªóng -->
                                          <i
                                            class="far fa-star"
                                            th:each="star : ${#numbers.sequence(1, emptyStars)}"
                                            th:if="${emptyStars > 0}"
                                          ></i>
                                        </th:block>
                                      </div>
                                      <span class="rating-count" th:text="'(' + ${course.reviewCount} + ' Reviews)'">
                                        (0 Reviews)
                                      </span>
                                    </div>
                                    <div class="rbt-bookmark-btn">
                                      <a class="rbt-round-btn" title="Bookmark" href="#"
                                        ><i class="feather-bookmark"></i
                                      ></a>
                                    </div>
                                  </div>
                                  <h4 class="rbt-card-title">
                                    <a th:href="@{'/course-details/' + ${course.courseId}}" th:text="${course.title}"
                                      >Course Title</a
                                    >
                                  </h4>
                                  <ul class="rbt-meta">
                                    <li>
                                      <i class="feather-book"></i>
                                      <span th:text="${course.modules.size()} + ' Lessons'">0 Lessons</span>
                                    </li>
                                    <li>
                                      <i class="feather-users"></i>
                                      <span th:text="${course.enrollments.size()} + ' Students'">0 Students</span>
                                    </li>
                                  </ul>

                                  <div class="rbt-card-bottom">
                                    <div class="rbt-price" th:if="${course.price > 0}">
                                      <!-- Hi·ªÉn th·ªã gi√° hi·ªán t·∫°i -->
                                      <span
                                        class="current-price"
                                        th:style="'font-size: 2.2rem;'"
                                        th:text="${#numbers.formatDecimal(course.price, 0, 'COMMA', 0, 'POINT')} + ' ƒë'"
                                      >
                                      </span>

                                      <!-- Hi·ªÉn th·ªã gi√° g·ªëc n·∫øu c√≥ gi·∫£m gi√° -->
                                      <span
                                        class="off-price"
                                        th:if="${course.discount > 0}"
                                        th:style="'font-size: 1.4rem; text-decoration: line-through; color: #999;'"
                                        th:text="${#numbers.formatDecimal(course.price / (1 - (course.discount / 100)), 0, 'COMMA', 0, 'POINT')} + ' ƒë'"
                                      >
                                      </span>
                                    </div>

                                    <div class="rbt-price" th:if="${course.price == 0}">
                                      <span class="current-price" th:style="'font-size: 2.2rem;'">Mi·ªÖn ph√≠</span>
                                    </div>

                                    <a
                                      class="rbt-btn-link left-icon"
                                      th:href="@{'/instructor/edit-course/' + ${course.courseId}}"
                                    >
                                      <i class="feather-edit"></i> Edit
                                    </a>

                                    <form
                                      th:action="@{/instructor/delete-course}"
                                      onsubmit="return confirm('B·∫°n c√≥ mu·ªën x√≥a b·∫£n nh√°p n√†y')"
                                      method="post"
                                    >
                                      <input type="hidden" name="_method" value="delete" />
                                      <input type="hidden" name="courseId" th:value="${course.courseId}" />
                                      <button type="submit" class="btn btn-danger">
                                        <i class="feather-trash"></i> Delete
                                      </button>
                                    </form>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- End Single Course -->
                          </div>
                        </div>

                        <div class="tab-pane fade" id="hidden-4" role="tabpanel" aria-labelledby="hidden-tab-4">
                          <div class="row g-5">
                            <!-- Start Single Course -->
                            <div class="col-lg-4 col-md-6 col-12" th:each="course : ${hiddenCourses}">
                              <div class="rbt-card variation-01 rbt-hover">
                                <div class="rbt-card-img">
                                  <a th:href="@{'/course-details/' + ${course.courseId}}">
                                    <img
                                      th:src="@{'/uploads/course/' + ${course.courseImage}}"
                                      onerror="this.onerror=null; this.src='/assets/images/course/course-default.jpg';"
                                      alt="Card image"
                                    />
                                  </a>
                                </div>
                                <div class="rbt-card-body">
                                  <div class="rbt-card-top">
                                    <div class="rbt-review">
                                      <div class="rating">
                                        <th:block
                                          th:with="fullStars=${T(java.lang.Math).floor(course.rating)}, emptyStars=${5 - T(java.lang.Math).floor(course.rating)}"
                                        >
                                          <!-- Hi·ªÉn th·ªã sao ƒë·∫ßy -->
                                          <i
                                            class="fas fa-star"
                                            th:each="star : ${#numbers.sequence(1, fullStars)}"
                                            th:if="${fullStars > 0}"
                                          ></i>

                                          <!-- Hi·ªÉn th·ªã sao r·ªóng -->
                                          <i
                                            class="far fa-star"
                                            th:each="star : ${#numbers.sequence(1, emptyStars)}"
                                            th:if="${emptyStars > 0}"
                                          ></i>
                                        </th:block>
                                      </div>
                                      <span class="rating-count" th:text="'(' + ${course.reviewCount} + ' Reviews)'">
                                        (0 Reviews)
                                      </span>
                                    </div>
                                    <div class="rbt-bookmark-btn">
                                      <a class="rbt-round-btn" title="Bookmark" href="#"
                                        ><i class="feather-bookmark"></i
                                      ></a>
                                    </div>
                                  </div>
                                  <h4 class="rbt-card-title">
                                    <a th:href="@{'/course-details/' + ${course.courseId}}" th:text="${course.title}"
                                      >Course Title</a
                                    >
                                  </h4>
                                  <ul class="rbt-meta">
                                    <li>
                                      <i class="feather-book"></i>
                                      <span th:text="${course.modules.size()} + ' Lessons'">0 Lessons</span>
                                    </li>
                                    <li>
                                      <i class="feather-users"></i>
                                      <span th:text="${course.enrollments.size()} + ' Students'">0 Students</span>
                                    </li>
                                  </ul>

                                  <div class="rbt-card-bottom">
                                    <div class="rbt-price" th:if="${course.price > 0}">
                                      <!-- Hi·ªÉn th·ªã gi√° hi·ªán t·∫°i -->
                                      <span
                                        class="current-price"
                                        th:style="'font-size: 2.2rem;'"
                                        th:text="${#numbers.formatDecimal(course.price, 0, 'COMMA', 0, 'POINT')} + ' ƒë'"
                                      >
                                      </span>

                                      <!-- Hi·ªÉn th·ªã gi√° g·ªëc n·∫øu c√≥ gi·∫£m gi√° -->
                                      <span
                                        class="off-price"
                                        th:if="${course.discount > 0}"
                                        th:style="'font-size: 1.4rem; text-decoration: line-through; color: #999;'"
                                        th:text="${#numbers.formatDecimal(course.price / (1 - (course.discount / 100)), 0, 'COMMA', 0, 'POINT')} + ' ƒë'"
                                      >
                                      </span>
                                    </div>

                                    <div class="rbt-price" th:if="${course.price == 0}">
                                      <span class="current-price" th:style="'font-size: 2.2rem;'">Mi·ªÖn ph√≠</span>
                                    </div>

                                    <a
                                      class="rbt-btn-link left-icon"
                                      th:href="@{'/instructor/edit-course/' + ${course.courseId}}"
                                    >
                                      <i class="feather-edit"></i> Edit
                                    </a>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- End Single Course -->
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- End Enrole Course  -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- End Card Style -->

      <div class="rbt-separator-mid">
        <div class="container">
          <hr class="rbt-separator m-0" />
        </div>
      </div>
      <div class="rbt-progress-parent">
        <svg class="rbt-back-circle svg-inner" width="100%" height="100%" viewBox="-1 -1 102 102">
          <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
        </svg>
      </div>
    </div>

    <th:block th:fragment="scripts">
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          const urlParams = new URLSearchParams(window.location.search);

          // Danh s√°ch tham s·ªë v√† th√¥ng b√°o t∆∞∆°ng ·ª©ng
          const messages = {
            createSuccess: "üéâ T·∫°o kh√≥a h·ªçc th√†nh c√¥ng!",
            createFailed: "‚ùå T·∫°o kh√≥a h·ªçc th·∫•t b·∫°i!",
            updateSuccess: "üéâ C·∫≠p nh·∫≠t kh√≥a h·ªçc th√†nh c√¥ng!",
            updateFailed: "‚ùå C·∫≠p nh·∫≠t kh√≥a h·ªçc th·∫•t b·∫°i!",
            deleteSuccess: "üéâ X√≥a kh√≥a h·ªçc th√†nh c√¥ng!",
            deleteFailed: "‚ùå X√≥a kh√≥a h·ªçc th·∫•t b·∫°i!",
            requestApprove: "üì© Y√™u c·∫ßu ph√™ duy·ªát ƒë√£ ƒë∆∞·ª£c g·ª≠i!",
          };

          // H√†m hi·ªÉn th·ªã toast
          function showToast(message, success = true) {
            const toast = document.createElement("div");
            toast.textContent = message;
            toast.style.position = "fixed";
            toast.style.bottom = "20px";
            toast.style.right = "20px";
            toast.style.padding = "10px 15px";
            toast.style.backgroundColor = success ? "#4CAF50" : "#F44336"; // xanh th√†nh c√¥ng, ƒë·ªè th·∫•t b·∫°i
            toast.style.color = "#fff";
            toast.style.borderRadius = "6px";
            toast.style.boxShadow = "0 0 10px rgba(0,0,0,0.2)";
            toast.style.zIndex = "9999";
            document.body.appendChild(toast);

            setTimeout(() => {
              toast.remove();
            }, 3000);
          }

          // Duy·ªát qua t·ª´ng tham s·ªë ƒë·ªÉ ki·ªÉm tra
          for (const [param, message] of Object.entries(messages)) {
            const value = urlParams.get(param);
            if (value === "true") {
              showToast(message, !param.toLowerCase().includes("failed"));
            }
          }
        });
      </script>
    </th:block>
  </body>
</html>
