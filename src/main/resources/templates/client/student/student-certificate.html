<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <body>
    <div th:fragment="content">
      <div class="rbt-page-banner-wrapper">
        <!-- Start Banner BG Image  -->
        <div class="rbt-banner-image"></div>
        <!-- End Banner BG Image  -->
      </div>
      <!-- Start Card Style -->
      <div class="rbt-dashboard-area rbt-section-overlayping-top rbt-section-gapBottom">
        <div class="container">
          <div class="row">
            <div class="col-lg-12">
              <!-- Start Dashboard Top  -->
              <div
                th:replace="~{client/instructor/instructor-banner :: instructor-banner}"
                sec:authorize="hasAnyRole('ROLE_INSTRUCTOR', 'ROLE_ADMIN')"
              ></div>
              <div
                th:replace="~{client/student/student-banner :: student-banner}"
                sec:authorize="hasRole('ROLE_STUDENT') and not hasAnyRole('ROLE_INSTRUCTOR', 'ROLE_ADMIN')"
              ></div>
              <!-- End Dashboard Top  -->

              <div class="row g-5">
                <div class="col-lg-3">
                  <!-- Dashboard Sidebar -->
                  <div th:replace="~{client/student/studentSidebar :: student-sidebar}"></div>
                </div>

                <div class="col-lg-9">
                  <div class="mb-4">
                    <h4 class="fw-bold mb-3">Chứng chỉ của bạn</h4>

                    <form th:action="@{/student-certificate}" method="get" class="row g-2">
                      <div class="col-md-9">
                        <input
                          type="text"
                          class="form-control form-control-lg"
                          name="query"
                          placeholder="Tìm kiếm theo tên chứng chỉ..."
                          th:value="${param.query}"
                        />
                      </div>
                      <div class="col-md-3 d-grid">
                        <button type="submit" class="btn btn-primary btn-lg">Tìm kiếm</button>
                      </div>
                    </form>
                  </div>

                  <div class="row g-4">
                    <div th:if="${#lists.isEmpty(certificates)}" class="text-center py-5">
                      <img src="/assets/images/empty-state.png" alt="Không có dữ liệu" style="max-width: 160px" />
                      <p class="mt-3 mb-1 fw-semibold text-dark">Không tìm thấy dữ liệu.</p>
                      <p class="text-muted">Chưa có dữ liệu, tạo mới để bắt đầu</p>
                    </div>

                    <div class="col-md-6" th:each="cert : ${certificates}">
                      <div class="card h-100">
                        <div class="card-body">
                          <h5 class="fw-semibold mb-1" th:text="${cert.course.title}">Tên chứng chỉ</h5>
                          <p class="mb-3 text-muted">
                            Ngày cấp:
                            <span th:text="${#dates.format(cert.issuedAt, 'dd/MM/yyyy')}">dd/MM/yyyy</span>
                          </p>
                          <a th:href="@{'/student/student-certificate/' + ${cert.id}}" class="btn btn-primary">
                            Xem chi tiết
                          </a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- End Card Style -->
    </div>
  </body>
</html>
