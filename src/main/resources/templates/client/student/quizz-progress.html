<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <body>
    <div th:fragment="content">
      <a class="close_side_menu" href="javascript:void(0);"></a>

      <div class="rbt-page-banner-wrapper">
        <!-- Start Banner BG Image  -->
        <div class="rbt-banner-image"></div>
        <!-- End Banner BG Image  -->
      </div>

      <!-- Start Card Style -->
      <div class="rbt-dashboard-area rbt-section-overlayping-top rbt-section-gapBottom">
        <div class="container">
          <div class="row">
            <div class="col-lg-12">
              <!-- Start Dashboard Top  -->
              <div
                th:replace="~{client/instructor/instructor-banner :: instructor-banner}"
                sec:authorize="hasAnyRole('ROLE_INSTRUCTOR', 'ROLE_ADMIN')"
              ></div>
              <div
                th:replace="~{client/student/student-banner :: student-banner}"
                sec:authorize="hasRole('ROLE_STUDENT') and not hasAnyRole('ROLE_INSTRUCTOR', 'ROLE_ADMIN')"
              ></div>
              <!-- End Dashboard Top  -->

              <div class="row g-5">
                <div class="col-lg-3">
                  <!-- Start Dashboard Sidebar  -->
                  <div th:replace="~{client/student/studentSidebar :: student-sidebar}"></div>
                  <!-- End Dashboard Sidebar  -->
                </div>

                <div class="col-lg-9">
                  <!-- Start Enrole Course  -->
                  <div class="rbt-dashboard-content bg-color-white rbt-shadow-box">
                    <div class="content">
                      <div class="section-title">
                        <h4 class="rbt-title-style-3" th:text="${'Tiến độ Quizzes - ' + user.email}"></h4>
                      </div>

                      <!-- Start Filter -->
                      <div class="rbt-dashboard-filter-wrapper">
                        <div class="row g-5">
                          <form method="get" action="/student/quizzes-progress" id="courseFilterForm">
                            <div class="row g-3 align-items-end">
                              <div class="col-lg-5">
                                <div class="filter-select rbt-modern-select">
                                  <select class="w-100" name="courseTitle" title="Chọn khóa học...">
                                    <option value="">Tất cả khóa học</option>
                                    <option
                                      th:each="course : ${courses}"
                                      th:value="${course.title}"
                                      th:text="${course.title}"
                                      th:selected="${course.title == courseTitle}"
                                    ></option>
                                  </select>
                                </div>
                              </div>
                              <div class="col-lg-2 d-flex align-items-end justify-content-center">
                                <button type="submit" class="btn btn-primary rounded-pill px-5 py-3 fs-5 w-100">
                                  <i class="feather-filter me-2"></i> Lọc
                                </button>
                              </div>
                            </div>
                          </form>
                        </div>
                      </div>
                      <!-- End Filter -->

                      <hr class="mt--30" />

                      <div class="rbt-dashboard-table table-responsive mobile-table-750 mt--30">
                        <table class="rbt-table table table-borderless">
                          <thead>
                            <tr>
                              <th>Khóa học</th>
                              <th>Quizz đã làm</th>
                              <th>Quá trình làm Quizz</th>
                              <th>Date</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr th:each="row : ${quizProgressList}">
                              <td th:text="${row[0]}">FullName</td>
                              <td th:text="${row[1]}">QuizzesProgress</td>
                              <td th:text="${row[2]}">CompletionPercentage</td>
                              <td th:text="${#dates.format(row[3], 'yyyy-MM-dd HH:mm:ss')}">LastSubmittedAt</td>
                            </tr>
                            <tr th:if="${#lists.isEmpty(quizProgressList)}">
                              <td colspan="5" class="text-center">Không có dữ liệu thống kê</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                  <!-- End Enrole Course  -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- End Card Style -->

      <div class="rbt-separator-mid">
        <div class="container">
          <hr class="rbt-separator m-0" />
        </div>
      </div>

      <div class="rbt-progress-parent">
        <svg class="rbt-back-circle svg-inner" width="100%" height="100%" viewBox="-1 -1 102 102">
          <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
        </svg>
      </div>
    </div>
  </body>
</html>
